<?xml version="1.0" encoding="UTF-8"?>

<!-- $Id$ -->

<!--

 MockTest driver.
 
-->

<mock-test>
    <context name="junit"/>

  	<servlet name="simple" class="net.sf.tapestry.junit.mock.simple.SimpleServlet"/>

  	<request>
  	
  	  	
  	  <assert-output name="Insert render">
  	  	The start of the JUnit test suite: JUnit Simple Application\.
  	  </assert-output>
  	  
  	  <assert-output-matches name="Page structure" subgroup="1">
<![CDATA[
<(/?\w+)(\s*\w+=".*")*\s*/?>
]]>
		<match>html</match>
		<match>head</match>
		<match>meta</match>
		<match>title</match>
		<match>/title</match>
		<match>/head</match>
		<match>body</match>	
		<match>br</match>	
		<match>a</match>
		<match>/a</match>
		<match>/body</match>
		<match>/html</match>		
	  </assert-output-matches>
  	  	  
  	  <assert-output name="Shell title render">
<![CDATA[    	  
  	  <title>JUnit Simple Home Page</title>
]]>  	  
  	  </assert-output>
  	  
  
  	 <assert-output name="Link to page Two">
<![CDATA[
	<a href="/junit/simple\?service=page&amp;context=Two">to page Two</a>
]]>
  	 </assert-output>
  
  	  <assert name="Session not created" expression="request.session == null"/>
  	  
  	</request>
  	
<!-- Request #2 simulates the user clicking the PageLink URL on the Home page. -->

  <request>
  	<parameter name="service" value="page"/>
  	<parameter name="context" value="Two"/>	
  	
  	<assert-output name="Page Two Title">
<![CDATA[
	<title>Page Two</title>
]]>
	</assert-output>
	
	<assert-output name="Page Two: No message, yet">
<![CDATA[
	<body>\s*<p>This page
]]>
	</assert-output>
	
	<assert-output name="Page Two: DirectLink">
<![CDATA[
	DirectLink: <a href="/junit/simple\?service=direct&amp;context=Two/link">click it</a>
]]>	
	</assert-output>	
	
  </request>
  
<!-- Request #3: Simulate clicking the DirectLink. -->
  
  <request>
  	<parameter name="service" value="direct"/>
  	<parameter name="context" value="Two/link"/>	
  	
	<assert-output name="Third request, message displayed">
<![CDATA[
	<body>\s*Note: You clicked the link!\s*<p>This page
]]>
	</assert-output>	

  </request>
		
</mock-test>