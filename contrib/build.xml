<?xml version="1.0"?>
<!-- $Id$ -->
<project name="Tapestry Contrib Framework" default="install">

  <property name="root.dir" value=".."/>
  <property file="${root.dir}/config/Version.properties"/>
  <property file="${root.dir}/config/build.properties"/>
  <property file="${root.dir}/config/common.properties"/>
  
  <path id="project.class.path">
    <pathelement location="${lib.ext.dir}/javax.servlet.jar"/>
    <pathelement location="${lib.ext.dir}/${log4j.jar}"/>
    <pathelement location="${lib.ext.dir}/javax.xml.jaxp.jar"/>
    <pathelement location="${lib.ext.dir}/org.apache.crimson.jar"/>
    <pathelement location="${framework.jar}"/>
    <pathelement location="${lib.ext.dir}/mckoidb.jar"/>
    <pathelement location="${jboss.client.dir}/jboss-client.jar"/>
    <pathelement location="${jboss.client.dir}/jboss-j2ee.jar"/>
    <pathelement location="${jboss.lib.dir}/jboss-jmx.jar"/>    
    <pathelement location="${jboss.lib.dir}/jboss-system.jar"/>
    <pathelement location="${jboss.lib.dir}/jboss-common.jar"/>
	<pathelement location="${lib.ext.dir}/${ognl.jar}"/>
  </path>
  
  <target name="init">
    <mkdir dir="${classes.dir}"/>
  </target>
  
  <target name="clean">
    <delete dir="${classes.dir}"/>
  </target>
  
  <target name="compile" depends="init" description="Compile all classes in the framework.">
    <javac srcdir="${src.dir}" destdir="${classes.dir}" debug="on" target="1.1">
      <classpath refid="project.class.path"/>
    </javac>
  </target>
  
  <target name="install" depends="compile" description="Compile all classes and build the installed JAR including all package resources.">
    <jar jarfile="${contrib.jar}" compress="false">
      <fileset dir="${src.dir}">
        <exclude name="**/*.java"/>
        <exclude name="**/package.html"/>
      </fileset>
      <fileset dir="${classes.dir}"/>
    </jar>
  </target>
</project>

