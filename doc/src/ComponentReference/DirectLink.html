<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- $Id$ --> 
<html>
<head>
<title>DirectLink</title>
<link rel="stylesheet" type="text/css" href="Tapestry.css" title="style">
</head>

<body>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
 <tr>
  <td align="left"><A href="Delegator.html"><IMG alt=Delegator src="common-images/prev.png"></A></td>  
  <td align="middle"><A href="index.html"><IMG alt="Component Index" src="common-images/home.png" ></A></td>  
  <td align="right"><A href="ExceptionDisplay.html"><IMG alt=ExceptionDisplay src="common-images/next.png"></A></td>  
 <tr>
 <tr>
  <td colspan="3"><hr></td>  
 </tr>
 <tr>
  <td colspan="3">
   <table border="0" cellpadding="4" cellspacing="4" width="100%">

<tr valign="top">
 <td>
  <table>
	 <tr>
	  <td><font size="+2"><b>DirectLink</b></font></td>
	 </tr>
	 <tr>
	  <td>
		 <A href="../api/net/sf/tapestry/link/DirectLink.html">
		 net.sf.tapestry.link.DirectLink</A>
		</td>
	 </tr>
  </table>
 </td>
 <td>
  <table align="right" valign="middle" bgcolor="#c0c0c0" cellpadding="8">
	 <tr>
	  <td><A href="DirectLink.html"><font color="blue">DirectLink Link</font></A></td>
	 </tr>
  </table>
 </td>
</tr>

<tr valign="center">
 <td colspan="2">&nbsp;</td>
</tr>

<tr>
 <td colspan="2">
  <b>Description</b>
	<br>
  Creates a &lt;a&gt; hyperlink that notifies the component when the link is 
  triggered. The link includes some context-specific data that is made available
  to the component's listener. This is used in cases where the 
  <a href="ActionLink.html">ActionLink</a> component can't be used (or is too inefficient).
  <p>
  See the Developers Guide <A href="../DevelopersGuide/cycle.listeners.html">
  ActionLink and DirectLink listeners</A> for a more complete description.</p>
            <P>Prior to release 2.2, this component was named 
            <STRONG>Direct</STRONG>.</P>
            
 </td>
</tr>

<tr>
 <td colspan="2">
  <b>See Also</b>
	<br>
	<a href="ActionLink.html">ActionLink</a>, 
	<A href="ExternalLink.html">ExternalLink</a>, 
  <A href="GenericLink.html">GenericLink</A>,
  <a href="PageLink.html">PageLink</a>,
  <a href="ServiceLink.html">ServiceLink</a>
 </td>
</tr>

<tr>
 <td colspan="2">
  <b>Parameters</b>
	<br>
  <table border="1" cellpadding="4" cellspacing="4" class="parameters">
  <tr> 
    <th>Name</th>
    <th>Type</th>
	  <th>Direction</th>
    <th>Required</th> 
    <th>Default</th>
    <th>Description</th>
  </tr>
  <tr>
    <td>listener</td>
    <td>
     <A href="../api/net/sf/tapestry/IActionListener.html"><tt>IActionListener</tt></A>
    </td>
    <td>in</td>
   	<td>yes</td>
		<td>&nbsp;</td>
		<td>Specifies an object that is notified when the link is clicked,
		which is typically a listener method of its container
		(for example, <tt>listeners.<i>method</i></tt>).</td>
	</tr>
  <tr>
    <td>parameters</td>
    <td>Object or<br>
        Object[] or<br> 
     <a href="http://java.sun.com/products/jdk/1.2/docs/api/java/util/List.html">
     <tt>List</tt></a>    
    </td>
    <td>in</td>
   	<td>no</td>
		<td>&nbsp;</td>
		<td>
    An array of objects to be encoded into the URL. These parameters will be 
    decoded when the link is triggered.
    <p>
    In a web application built onto of Enterprise JavaBeans, the context is 
    often the primary key of some Entity bean; typically such keys are Strings 
    or Integers.
    <p>
    A listener method can retrieve the parameters using 
    <A href="/api/net/sf/tapestry/IRequestCycle.html#getServiceParameters()">
    <tt>IRequestCycle.getServiceParameters()</tt></A>. 
    <p>
    Prior to release 2.2, the parameters were always type String. They may now 
    be of any type; type will be maintained when the parameters are later 
    retrieved by a listener. See 
    <A href="../api/net/sf/tapestry/util/io/DataSqueezer.html"><tt>DataSqueezer</tt></A> for more details.</p> 
       
    </td>
	</tr>
  <tr>
    <td>disabled</td>
    <td>boolean</td>
    <td>in</td>
   	<td>no</td>
		<td>false</td>
		<td>Controls whether the link is produced. If disabled, the portion of the 
    template the link surrounds is still rendered, but not the link itself.
    </td>
	</tr>
  <tr>
    <td>stateful</td>
    <td>boolean</td>
    <td>in</td>
   	<td>no</td>
		<td>true</td>
		<td>
    If true (the default), then the component requires an active (i.e., non-new) 
    <tt>HttpSession</tt> when triggered. Failing that, it throws a 
    <A href="../api/net/sf/tapestry/StaleLinkException"><tt>StaleLinkException</tt></A>. 
    If false, then no check is necessary. The 
    latter works well with links that encode all necessary state inside the URL 
    itself.
    </td>
	</tr>
  <tr>
    <td>scheme</td>
    <td>String</td>
    <td>in</td>
   	<td>no</td>
		<td>&nbsp;</td>
		<td>
    If specified, then a longer URL (including scheme, server and possibly port) 
    is generated using the specified scheme. Server is determined fromt he 
    incoming request, and port is deterimined from the port paramter or the 
    incoming request.     
    </td>
	</tr>
  <tr>
    <td>port</td>
    <td>int</td>
    <td>in</td>
   	<td>no</td>
		<td>&nbsp;</td>
		<td>
    If specified, then a longer URL (including scheme, server and port) is 
    generated using the specified port. The server is determined from the 
    incoming request, the scheme from the scheme parameter or the incoming 
    request. 
    </td>
	</tr>
  <tr>
    <td>anchor</td>
    <td>String</td>
    <td>in</td>
   	<td>no</td>
		<td>&nbsp;</td>
		<td>
    The name of an anchor or element to link to. The final URL will have '#' 
    and the anchor appended to it.
    </td>
	</tr>
	</table>
            <P>Body: <STRONG>rendered</STRONG><BR>Informal parameters: 
            <STRONG>allowed</STRONG>
    <br>
  Reserved parameters: 
            "href" </P>
    
 </td>
</tr>

<tr>
 <td colspan="2">
  <b>Examples</b>
	<p>
  In this example the DirectLink component enables users to select a Customer 
  from the Customer List table.
	<p>

<table class="examples" cellspacing="6">
  <tr align="left">
   <th>ID</th>
   <th>&nbsp;</th>
   <th>Name</th>
   <th>&nbsp;</th>
   <th>Level</th>
  </tr>
  <tr>
   <td colspan="5"><hr></td>
  </tr>
  <tr>
   <td>10276</td>
   <td>&nbsp;</td>
   <td><a href="DirectLink.html" style="{color:blue;}">Ms Sophie L. Jamies</a></td>
   <td>&nbsp;</td>
   <td>Platinum</td>
  </tr>
  <tr>
   <td>10539</td>
   <td>&nbsp;</td>
   <td><a href="DirectLink.html" style="{color:blue;}">Mr Albert H. Davies</a></td>
   <td>&nbsp;</td>
   <td>Gold</td>
  </tr>
  <tr>
   <td>10552</td>
   <td>&nbsp;</td>
   <td><a href="DirectLink.html" style="{color:blue;}">Mrs Jan S. Flawson</a></td>
   <td>&nbsp;</td>
   <td>Gold</td>
  </tr>
  <tr>
   <td>10863</td>
   <td>&nbsp;</td>
   <td><a href="DirectLink.html" style="{color:blue;}">Mr Robert J. Hassel</a></td>
   <td>&nbsp;</td>
   <td>Silver</td>
  </tr>
</table>

<pre>
&lt;table cellspacing="6"&gt;
  &lt;tr&gt;
   &lt;td&gt;ID&lt;/td&gt;
   &lt;td&gt;&amp;nbsp;&lt;/td&gt;
   &lt;td&gt;Name&lt;/td&gt;
   &lt;td&gt;&amp;nbsp;&lt;/td&gt;
   &lt;td&gt;Level&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td colspan="5"&gt;&lt;hr&gt;&lt;/td&gt;
  &lt;/tr&gt;
 &lt;span jwcid="foreachCustomer"&gt;
  &lt;tr&gt;
   &lt;td&gt;&lt;span jwcid="insertId"/&gt;&lt;/td&gt;
   &lt;td&gt;&amp;nbsp;&lt;/td&gt;
   &lt;td&gt;&lt;span jwcid="<span class="jwcid">directLinkCustomer</span>"&gt; &lt;span jwcid="insertFullName"/&gt; &lt;/span&gt;&lt;/td&gt;
   &lt;td&gt;&amp;nbsp;&lt;/td&gt;
   &lt;td&gt;&lt;span jwcid="insertMemberLevel"/&gt;&lt;/td&gt;
  &lt;/tr&gt;
 &lt;/span&gt;
&lt;/table&gt;


&lt;component id="foreachCustomer" type="<A href="Foreach.html">Foreach</a>"&gt;
    &lt;binding name="source" expression="visit.customerList"/&gt;
    &lt;binding name="value" expression="customer"/&gt;
&lt;/component&gt;

&lt;component id="<span class="jwcid">directLinkCustomer</span>" type="<A href="DirectLink.html">DirectLink</a>"&gt;
    &lt;binding name="listener" expression="listeners.customerSelectAction"/&gt;
    &lt;binding name="parameters" expression="customer.id"/&gt;
&lt;/component&gt;

&lt;component id="insertId" type="<A href="Insert.html">Insert</a>"&gt;
    &lt;binding name="value" expression="customer.id"/&gt;
&lt;/component&gt;

&lt;component id="insertFullName" type="<A href="Insert.html">Insert</a>"&gt;
    &lt;binding name="value" expression="customer.fullName"/&gt;
&lt;/component&gt;

&lt;component id="insertMemberLevel" type="<A href="Insert.html">Insert</a>"&gt;
    &lt;binding name="value" expression="customer.memberLevel"/&gt;
&lt;/component&gt;


public class SalesPage extends BasePage {
    private Customer customer;
	 
    public Customer getCustomer() { return customer; }

    public void setCustomer(Customer value) {
        customer = value;
    }
    
    public void customerSelectAction(IRequestCycle cycle) {
        Visit visit = (Visit) getVisit();        
        Object[] parameters = cycle.getServiceParameters();
        Customer customer = visit.getCustomerForId((Integer) parameters[0]);
        // Perform some action with the selected customer.
    }

    public void detach() {
        customer = null;
        super.detach();
    }
}

public class Visit() implements Serializable {

    public List getCustomerList() {
        List customerList = new ArrayList();         
        // Perform a database query retrieving the list of customers.
        ..        
        return customerList; 
    }
    
    public Cutomer getCustomerForId(Integer id) {
        Customer customer = null;         
        // Perform a database query retrieving the customer for the given ID.
        ..        
        return customer; 
    }    	 
}

public class Customer {
    private Integer id;
    private String fullName;
    private String memberLevel;

    public Customer(Integer id, String fullName, String memberLevel) { 
        this.id = id;
        this.fullName = fullName;
        this.memberLevel = memberLevel; 
    }

    public Integer getId() { return id; }
		
    public String getFullName() { return fullName; }

    public String getMemberLevel() { return memberLevel; }
}
</pre>      

 </td></tr></table>
</td></tr>
<tr>
 <td colspan="3"><hr></td>
</tr>
<tr>
 <td align="left"><A href="Delegator.html"><IMG alt=Delegator src="common-images/prev.png"></A></td>  
 <td align="middle"><A href="index.html"><IMG alt="Component Index" src="common-images/home.png" ></A></td>  
 <td align="right"><A href="ExceptionDisplay.html"><IMG alt=ExceptionDisplay src="common-images/next.png"></A></td>  
</tr>
</table>

</body>
</html>