<?xml version="1.0"?>
<!-- edited with XML Spy v3.0 NT (http://www.xmlspy.com) by Howard Ship (Primix Solutions) -->
<!DOCTYPE ejb-jar PUBLIC '-//Sun Microsystems, Inc.//DTD Enterprise JavaBeans 1.1//EN' 'http://java.sun.com/j2ee/dtds/ejb-jar_1_1.dtd'>
<ejb-jar>
	<enterprise-beans>
		<session>
			<display-name>KeyAllocator</display-name>
			<ejb-name>KeyAllocator</ejb-name>
			<home>com.primix.vlib.ejb.IKeyAllocatorHome</home>
			<remote>com.primix.vlib.ejb.IKeyAllocator</remote>
			<ejb-class>com.primix.vlib.ejb.KeyAllocatorBean</ejb-class>
			<session-type>Stateless</session-type>
			<transaction-type>Container</transaction-type>
			<env-entry>
				<description>The number of keys to allocate in one
		database transaction</description>
				<env-entry-name>blockSize</env-entry-name>
				<env-entry-type>java.lang.Integer</env-entry-type>
				<env-entry-value>50</env-entry-value>
			</env-entry>
			<resource-ref>
				<description>DataSource connected to the vlib database.</description>
				<res-ref-name>jdbc/dataSource</res-ref-name>
				<res-type>javax.sql.DataSource</res-type>
				<res-auth>Container</res-auth>
			</resource-ref>
		</session>
		<session>
			<display-name>BookQuery</display-name>
			<ejb-name>BookQuery</ejb-name>
			<home>com.primix.vlib.ejb.IBookQueryHome</home>
			<remote>com.primix.vlib.ejb.IBookQuery</remote>
			<ejb-class>com.primix.vlib.ejb.BookQueryBean</ejb-class>
			<session-type>Stateful</session-type>
			<transaction-type>Container</transaction-type>
			<resource-ref>
				<description>DataSource connected to the vlib database.</description>
				<res-ref-name>jdbc/dataSource</res-ref-name>
				<res-type>javax.sql.DataSource</res-type>
				<res-auth>Container</res-auth>
			</resource-ref>
		</session>
		<entity>
			<display-name>Person</display-name>
			<ejb-name>Person</ejb-name>
			<home>com.primix.vlib.ejb.IPersonHome</home>
			<remote>com.primix.vlib.ejb.IPerson</remote>
			<ejb-class>com.primix.vlib.ejb.PersonBean</ejb-class>
			<persistence-type>Container</persistence-type>
			<prim-key-class>java.lang.Integer</prim-key-class>
			<reentrant>False</reentrant>
			<cmp-field>
				<field-name>email</field-name>
			</cmp-field>
			<cmp-field>
				<field-name>password</field-name>
			</cmp-field>
			<cmp-field>
				<field-name>firstName</field-name>
			</cmp-field>
			<cmp-field>
				<field-name>personId</field-name>
			</cmp-field>
			<cmp-field>
				<field-name>lastName</field-name>
			</cmp-field>
			<primkey-field>personId</primkey-field>
			<ejb-ref>
				<description/>
				<ejb-ref-name>ejb/KeyAllocator</ejb-ref-name>
				<ejb-ref-type>Session</ejb-ref-type>
				<home>com.primix.vlib.ejb.IKeyAllocatorHome</home>
				<remote>com.primix.vlib.ejb.IKeyAllocator</remote>
			</ejb-ref>
			<ejb-ref>
				<description/>
				<ejb-ref-name>ejb/Book</ejb-ref-name>
				<ejb-ref-type>Session</ejb-ref-type>
				<home>com.primix.vlib.ejb.IBookHome</home>
				<remote>com.primix.vlib.ejb.IBook</remote>
			</ejb-ref>
		</entity>
		<entity>
			<display-name>Book</display-name>
			<ejb-name>Book</ejb-name>
			<home>com.primix.vlib.ejb.IBookHome</home>
			<remote>com.primix.vlib.ejb.IBook</remote>
			<ejb-class>com.primix.vlib.ejb.BookBean</ejb-class>
			<persistence-type>Container</persistence-type>
			<prim-key-class>java.lang.Integer</prim-key-class>
			<reentrant>False</reentrant>
			<cmp-field>
				<field-name>description</field-name>
			</cmp-field>
			<cmp-field>
				<description>Relationship to Publisher entity.</description>
				<field-name>publisherPK</field-name>
			</cmp-field>
			<cmp-field>
				<description>Relationship to Person entity (holder of book).</description>
				<field-name>holderPK</field-name>
			</cmp-field>
			<cmp-field>
				<field-name>ISBN</field-name>
			</cmp-field>
			<cmp-field>
				<field-name>bookId</field-name>
			</cmp-field>
			<cmp-field>
				<description>Relationship to Person entity (owner of book).</description>
				<field-name>ownerPK</field-name>
			</cmp-field>
			<cmp-field>
				<field-name>lendCount</field-name>
			</cmp-field>
			<cmp-field>
				<field-name>title</field-name>
			</cmp-field>
			<primkey-field>bookId</primkey-field>
			<ejb-ref>
				<description/>
				<ejb-ref-name>ejb/KeyAllocator</ejb-ref-name>
				<ejb-ref-type>Session</ejb-ref-type>
				<home>com.primix.vlib.ejb.IKeyAllocatorHome</home>
				<remote>com.primix.vlib.ejb.IKeyAllocator</remote>
			</ejb-ref>
			<ejb-ref>
				<description/>
				<ejb-ref-name>ejb/Person</ejb-ref-name>
				<ejb-ref-type>Entity</ejb-ref-type>
				<home>com.primix.vlib.ejb.IPersonHome</home>
				<remote>com.primix.vlib.ejb.IPerson</remote>
			</ejb-ref>
			<ejb-ref>
				<description/>
				<ejb-ref-name>ejb/Publisher</ejb-ref-name>
				<ejb-ref-type>Entity</ejb-ref-type>
				<home>com.primix.vlib.ejb.IPublisherHome</home>
				<remote>com.primix.vlib.ejb.IPublisher</remote>
			</ejb-ref>
		</entity>
		<entity>
			<display-name>Publisher</display-name>
			<ejb-name>Publisher</ejb-name>
			<home>com.primix.vlib.ejb.IPublisherHome</home>
			<remote>com.primix.vlib.ejb.IPublisher</remote>
			<ejb-class>com.primix.vlib.ejb.PublisherBean</ejb-class>
			<persistence-type>Container</persistence-type>
			<prim-key-class>java.lang.Integer</prim-key-class>
			<reentrant>False</reentrant>
			<cmp-field>
				<field-name>name</field-name>
			</cmp-field>
			<cmp-field>
				<field-name>publisherId</field-name>
			</cmp-field>
			<primkey-field>publisherId</primkey-field>
			<ejb-ref>
				<description/>
				<ejb-ref-name>ejb/KeyAllocator</ejb-ref-name>
				<ejb-ref-type>Session</ejb-ref-type>
				<home>com.primix.vlib.ejb.IKeyAllocatorHome</home>
				<remote>com.primix.vlib.ejb.IKeyAllocator</remote>
			</ejb-ref>
			<ejb-ref>
				<description/>
				<ejb-ref-name>ejb/Book</ejb-ref-name>
				<ejb-ref-type>Entity</ejb-ref-type>
				<home>com.primix.vlib.ejb.IBookHome</home>
				<remote>com.primix.vlib.ejb.IBook</remote>
			</ejb-ref>
		</entity>
	</enterprise-beans>
	<assembly-descriptor>
		<container-transaction>
			<method>
				<ejb-name>KeyAllocator</ejb-name>
				<method-name>*</method-name>
			</method>
			<method>
				<ejb-name>Person</ejb-name>
				<method-name>*</method-name>
			</method>
			<method>
				<ejb-name>Book</ejb-name>
				<method-name>*</method-name>
			</method>
			<method>
				<ejb-name>Publisher</ejb-name>
				<method-name>*</method-name>
			</method>
			<method>
				<ejb-name>BookQuery</ejb-name>
				<method-name>*</method-name>
			</method>
			<trans-attribute>Required</trans-attribute>
		</container-transaction>
	</assembly-descriptor>
</ejb-jar>
