<?xml version="1.0"?>

<!-- $Id$ -->

<!-- Special build script used when creating new Tapestry releases. 

	 Copy this file and a copy of build.properties to a temporary directory
	 and execute "ant -emacs setup build" using JDK 1.3.
	 
	 Be sure to have a complete build.properties and environment, including
	 the necessary settings and packages for generating documentation
	 (i.e., settings for "fop.dir" and "clover.dir").
	 
	 Generates release distributions into the current directory.
	 
	 -->

<project name="Tapestry Export" default="build">

<property name="export.dir" value="export"/>

<target name="setup" description="Sets up the directory, gets the files via CVS.">
	<delete dir="${export.dir}" quiet="true"/>
	<mkdir dir="${export.dir}"/>
	<cvs command="-z3 export"
		tag="HEAD" package="Tapestry"
		dest="${export.dir}"  
		cvsroot=":pserver:anonymous@cvs.tapestry.sourceforge.net:/cvsroot/tapestry"/>
	<copy file="config/build.properties"
		todir="${export.dir}/Tapestry/config"/>
</target>


<target name="build" description="Builds the distribution.">
	<ant inheritAll="false" dir="${export.dir}/Tapestry" target="dist"/>
	<copy todir=".">
	  <fileset dir="${export.dir}/Tapestry/dist">
	    <include name="*.tar.gz"/>
          </fileset>
        </copy>
</target>


</project>
